import PySimpleGUI as sg
from lib.translator import start_translate,validateJSON
import threading
from logo import plogo
from lang import lang_choices
import pyperclip
languages={x[1]:x[0] for x in lang_choices}
translateButtonDisabled = False


sg.theme('DarkBlue')  # please make your windows colorful

a=sg.Titlebar(title="sss")
# sg.SystemTray(

#     filename = "icon.ico"
#   )


layout = [[sg.Text(' JSON Translator'), sg.Text(size=(12,1))],[],
          [sg.Multiline(	border_width=1,default_text='Paste your JSON here', size=(45,20),text_color="white",key='-IN-'),
          sg.Multiline('', size=(45,20),text_color="white",key='-OUTPUT-',right_click_menu=(0,["Clear","Copy to Clipboard"]))]
  ,[sg.Text('Status')],

          [sg.Multiline('',key="status",size=(95,5),autoscroll=True,     auto_refresh = True,  reroute_stdout = True,text_color="#00FF00",background_color="black")],
                    [sg.Text("Language :"),sg.Combo(list(languages.keys()),key='dropdown',size=(18,6),tooltip="Select Language",default_value="French")],
                   [sg.Button('Translate',disabled=translateButtonDisabled),sg.Button('About'), sg.Button('Exit')],
          
          ]

icon ="AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////r6+v/v7+///f39///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/f3/lJSU/zw8PP+jo6P/rq6u/9LS0v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Pz8/9PT0//HBwc/ywsLP8vLy//QkJC/3p6ev/h4eH/+vr6/////////////////////////////////////////////////////////////////////////////////////////////Pz8//7+/v////////////7+/v/9/f3//v7+//Dw8P+srKz/3t7e//Dw8P+2trb/Xl5e/ysrK/+jo6P///////////////////////////////////////////////////////////////////////////////////////b29v97e3v/XV1d/83Nzf/AwMD/VVVV/5GRkf/+/v7////////////////////////////19fX/enp6/yMjI/+jo6P//f39/////////////////////////////////////////////////////////////////////////////////87Ozv90dHT/JSUl/xsbG/9SUlL/4ODg///////////////////////////////////////4+Pj/e3t7/yoqKv/h4eH//////////////////////////////////////////////////////////////////////////////////////+Pj4/8lJSX/Dg4O/3Jycv/4+Pj////////////////////////////////////////////19fX/Xl5e/3h4eP//////////////////////////////////////////////////////////////////////////////////////mJiY/05OTv+EhIT/Jycn/8jIyP////////////////////////////////////////////////+zs7P/dnZ2/////////////////////////////////////////////////////////////////////////////////+jo6P9MTEz/lZWV//////98fHz/W1tb//39/f////////////////////////////////////////////z8/P/s7Oz////////////////////////////////////////////////////////////////////////////z8/P/ysrK/5ycnP/i4uL/6+vr/7u7u/8+Pj7/ra2t//Ly8v////////////v7+//o6Oj/+vr6///////////////////////v7+//8fHx/////////////////////////////////////////////////////////////////4GBgf8oKCj/MDAw/ysrK/8rKyv/LS0t/xkZGf8aGhr/a2tr////////////6urq/1ZWVv+bm5v//////////////////f39/2pqav99fX3/////////////////////////////////////////////////////////////////1dXV/7a2tv+4uLj/tbW1/1lZWf+urq7/ubm5/7e3t//Nzc3/////////////////hoaG/z09Pf/5+fn////////////ExMT/NjY2/8fHx//////////////////////////////////////////////////////////////////////////////////9/f3/tra2//f39//////////////////////////////////CwsL/Q0ND/5KSkv+UlJT/mZmZ/2lpaf9oaGj/+Pj4////////////////////////////////////////////////////////////////////////////gYGB/5CQkP////////////////////////////////////////////39/f9mZmb/ERER/zk5Of8nJyf/Dg4O/6+vr/////////////////////////////////////////////////////////////////////////////////+hoaH/S0tL/9ra2v///////////////////////////////////////////8vLy/8iIiL/2dnZ/3d3d/81NTX/2tra//////////////////////////////////////////////////////////////////////////////////39/f+bm5v/UFBQ/9nZ2f//////////////////////////////////////3d3d/z09Pf+kpKT/Xl5e/4GBgf////////////////////////////////////////////////////////////////////////////////////////////j4+P+cnJz/S0tL/46Ojv/r6+v/7e3t//v7+//Ly8v/x8fH/+7u7v/+/v7/jo6O/xQUFP8kJCT/4eHh//////////////////////////////////////////////////////////////////////////////////////////////////39/f+lpaX/UVFR/zExMf8vLy//gICA/2ZmZv8jIyP/VlZW/+Pj4//q6ur/NTU1/0xMTP/u7u7////////////////////////////////////////////////////////////////////////////////////////////////////////////s7Oz/sLCw/6+vr/+zs7P/c3Nz/zU1Nf/MzMz///////z8/P+9vb3/3t7e///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Ly8v/ysrK////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="


window = sg.Window('JSON Translator', layout,icon=plogo)

while True:  # Event Loop
    event, values = window.read()
    # print(event, values)
    if event == sg.WIN_CLOSED or event == 'Exit':
        break
    if event=="About":
        sg.popup('anand467\nhttps://github.com/anandu467')
    if event == 'Translate':
        window["status"].update("")
        translateButtonDisabled=True
        if(not validateJSON(values['-IN-'])=="valid"):
            sg.popup_error("Invalid JSON")
            translateButtonDisabled=False
        else:
        # print(languages.get(values['dropdown']))
        # change the "output" element to be the value of "input" element
            threading.Thread(target=start_translate,args=(values['-IN-'],languages.get(values['dropdown']),window),daemon=True).start()
        
    if event=="-TRANSLATED-":
        window['-OUTPUT-'].update(values[event])
        translateButtonDisabled=False
    if event=="Copy to Clipboard":
        pyperclip.copy(values["-OUTPUT-"])
    if event=="Clear":
        window["-OUTPUT-"].update("")


        



window.close()



